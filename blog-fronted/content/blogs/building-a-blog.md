---
title: 构建简约高效的博客
date: 2024-03-26
---

[[toc]]

## 方案选型

在构建该博客的之前，我本打算使用现有的模板或者方案。然而我看了许多基于vue3的博客构建方案，很多都是直接使用CSR，然而CSR对博客并不友好。

CSR即Client-Side-Rendering，指的是服务器仅发送一个最初几乎为空的HTML文档，以及JavaScript文件，浏览器下载JavaScript文件后，Vue框架将在客户端动态生成HTML内容，并将其插入页面中。这种方式使得页面能够实现丰富的交互性和动态内容更新，而不需要每次用户操作时都重新加载页面。

然而，CSR不利于SEO，在CSR中，网页的内容是通过JavaScript在用户的浏览器中动态生成的。这意味着，当搜索引擎的爬虫访问这样的网站时，它最初获取到的HTML几乎是空的，不包含实际内容。爬虫需要执行相应的JavaScript代码来渲染页面内容，这个过程比直接抓取已经生成的HTML内容要复杂和耗时。

在vue的官方文档中，我发现vue也可以使用SSR(Server-Side-Rendering)。

[与CSR相比，SSR 的优势主要在于：](https://cn.vuejs.org/guide/scaling-up/ssr.html)

>- **更快的首屏加载**：这一点在慢网速或者运行缓慢的设备上尤为重要。服务端渲染的 HTML 无需等到所有的 JavaScript 都下载并执行完成之后才显示，所以你的用户将会更快地看到完整渲染的页面。除此之外，数据获取过程在首次访问时在服务端完成，相比于从客户端获取，可能有更快的数据库连接。这通常可以带来更高的[核心 Web 指标](https://web.dev/vitals/)评分、更好的用户体验，而对于那些“首屏加载速度与转化率直接相关”的应用来说，这点可能至关重要。
>- **统一的心智模型**：你可以使用相同的语言以及相同的声明式、面向组件的心智模型来开发整个应用，而不需要在后端模板系统和前端框架之间来回切换。
>- **更好的 SEO**：搜索引擎爬虫可以直接看到完全渲染的页面。


> [!TIP]
> 截至目前，Google 和 Bing 可以很好地对同步 JavaScript 应用进行索引。这里的“同步”是关键词。如果你的应用以一个 loading 动画开始，然后通过 Ajax 获取内容，爬虫并不会等到内容加载完成再抓取。也就是说，如果 SEO 对你的页面至关重要，而你的内容又是异步获取的，那么 SSR 可能是必需的。



使用 SSR 时还有一些权衡之处需要考量：

- 开发中的限制。浏览器端特定的代码只能在某些生命周期钩子中使用；一些外部库可能需要特殊处理才能在服务端渲染的应用中运行。
- 更多的与构建配置和部署相关的要求。服务端渲染的应用需要一个能让 Node.js 服务器运行的环境，不像完全静态的 SPA 那样可以部署在任意的静态文件服务器上。
- 更高的服务端负载。在 Node.js 中渲染一个完整的应用要比仅仅托管静态文件更加占用 CPU 资源，因此如果你预期有高流量，请为相应的服务器负载做好准备，并采用合理的缓存策略。

除了SSR，vue还支持SSG。

>静态站点生成 (Static-Site Generation，缩写为 SSG)，也被称为预渲染，是另一种流行的构建快速网站的技术。如果用服务端渲染一个页面所需的数据对每个用户来说都是相同的，那么我们可以只渲染一次，提前在构建过程中完成，而不是每次请求进来都重新渲染页面。预渲染的页面生成后作为静态 HTML 文件被服务器托管。
>
>SSG 保留了和 SSR 应用相同的性能表现：它带来了优秀的首屏加载性能。同时，它比 SSR 应用的花销更小，也更容易部署，因为它输出的是静态 HTML 和资源文件。这里的关键词是静态：SSG 仅可以用于消费静态数据的页面，即数据在构建期间就是已知的，并且在多次部署期间不会改变。每当数据变化时，都需要重新部署。

经过分析，我希望博客使用SSG渲染。

构建前，我看了很多博客的页面，我发现很多大佬的博客都很简朴，不需要太多花里胡哨的东西，这种博客里面的内容比较有意思，有自己独特的内容分享。

相反，一些博客会做的比较臃肿，比如鼠标指针会伴随特效，右下角会有人偶互动等(这种博客一点进去，GPU能稳定占用20%)。

所以，我认为好的博客不需要太花哨，内容往往才是最重要的。

## 实践过程

一开始，我打算在Vite上实现SSG，然而折腾了几天后，我放弃了Vite上实现。Vite 提供了内置的SSG支持，但它在设计上是偏底层的。对于前端不够深入的我来说，折腾起来有点困难，即使有很多抽象掉许多复杂细节的社区插件。

于是，我便转向Nuxt，[Nuxt](https://nuxt.com/) 是一个构建于 Vue 生态系统之上的全栈框架，它为编写 Vue SSR 应用提供了丝滑的开发体验。一开始我没选它是因为，为了实现SSG而去学一个框架，感觉有点小题大做，增加学习成本，且会让项目变臃肿。使用后才发现真香！Nuxt不仅支持SSR，还支持多种渲染模式。我选择了最适合我的[ISR渲染(Incremental Site Rendering)](https://vercel.com/docs/frameworks/nuxt#incremental-static-regeneration-isr)。使用ISR渲染可以保留SSG的优点的同时，实现内容的更新无需重新渲染全部内容。

我认为[Anthony Fu的博客](https://antfu.me/)十分简约好看，令人开心的是，在翻阅他的博客的时候发现他的博客是开源的，且他的博客上很多有意思的效果都有写博客跟大家分享。Shout out to Anthony Fu.

## 最后

跟着Nuxt的官方文档，上手并不难。于是我便一步步构建完这个了这个博客。在这里感谢期间许多优秀的文章和社区中大佬们的帮助。

如果你喜欢我的博客，欢迎get[同款](https://github.com/kintong3000/kintong3000.me)。


在这里也推荐一些优秀的博客

https://antfu.me/

https://zhile.io/

https://cali.so/

https://program-think.blogspot.com/

https://coolshell.cn/

https://www.ruanyifeng.com/blog/

